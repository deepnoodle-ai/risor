// Example Risor program for testing language server features
// This file demonstrates various Risor language constructs

// Configuration object
var config = {
    "host": "localhost",
    "port": 8080,
    "debug": true,
    "timeout": 30.5
}

// Simple function
greet := func(name) {
    if (name == "") {
        return "Hello, World!"
    }
    return sprintf("Hello, %s!", name)
}

// Function with multiple parameters
calculate := func(operation, a, b) {
    if (operation == "add") {
        return a + b
    } else if (operation == "subtract") {
        return a - b
    } else if (operation == "multiply") {
        return a * b
    } else if (operation == "divide") {
        if (b == 0) {
            return "Division by zero error"
        }
        return a / b
    }
    return "Unknown operation"
}

// Array operations using functional style
numbers := [1, 2, 3, 4, 5]
doubled := numbers | map(func(n) { n * 2 })

// Object manipulation
person := {
    "name": "Alice",
    "age": 30,
    "email": "alice@example.com"
}

// Test various builtins
println("Config:", config)
println("Numbers length:", len(numbers))
println("Doubled:", doubled)
println("Greeting:", greet("Developer"))
println("Calculation:", calculate("add", 10, 5))

// String manipulation
message := "   Hello, Risor!   "
trimmed := strings.trim_space(message)
upper := strings.to_upper(trimmed)
println("Processed message:", upper)

// Error handling example
safe_divide := func(a, b) {
    if (b == 0) {
        return nil, "cannot divide by zero"
    }
    return a / b, nil
}

result, err := safe_divide(10, 2)
if (err != nil) {
    println("Error:", err)
} else {
    println("Result:", result)
}

// Functional operations on lists
squares := [1, 2, 3, 4, 5] | map(func(i) { i * i })
println("Squares:", squares)

evens := numbers | filter(func(n) { n % 2 == 0 })
println("Evens:", evens)

// Dictionary access examples
name := person["name"]
age := person["age"]
println("Person info:", name, age)

// Switch expression
get_day_type := func(day) {
    switch (day) {
    case "Saturday", "Sunday":
        return "weekend"
    default:
        return "weekday"
    }
}
println("Monday is a:", get_day_type("Monday"))
println("Saturday is a:", get_day_type("Saturday"))
